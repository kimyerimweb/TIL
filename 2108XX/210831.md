## 210831 TIL

### 오늘 배운 것

- 프론트단 입장에서 로그인에 성공하면 어떻게 표시할 것인가?
  1. 쿠키에 정보를 저장한다. (로그아웃하면 정보 버림)
  2. 그 외에도 상태에 따라 다른 페이지를 표시하기 위해 전역으로 저장해야한다.(withCredentials: true를 넣으면 프론트와 백의 주소가 달라도 쿠키를 저장할 수 있다.)
  3. 리덕스, 몹엑스 등등 있지만 SWR도 사용한다.
  ```javascript
  const { data, error, revalidate, mutate } = useSWR("쿼리스트링", fetcher);
  //data가 undefined면 로딩중, 있으면 GET 요청 성공
  ```
- swr을 활용하는 방법

  1. 비동기 처리
  2. 비동기가 아닌 처리(localStorage등)
  3. fetcher 함수에서 가져오는 값을 원하는 형태로 가공할 수 있다. (data의 length만 저장하는 등..)

- 주의해야할 것

  1. 서버에 요청을 너무 날리면 프론트가 디도스 공격을 하는 꼴이 된다!
  2. dedupingInterval: 100000 같이 서버에서 값을 가져오는 간격을 크게 한다.(dedupingInterval 덕분에 컴포넌트 내부에서 useSWR 코드를 많이 써도 괜찮다. 그리고 번외로 실시간 채팅은 저 간격이 짧다.)
  3. 로그인 같은 인증이 필요한 단계는 passimistic UI로 설계해야한다.
  4. 하지만 별로 신뢰가 중요하지 않고 사용자의 사용 경험을 좋게 하는 부분은 optimistic UI로 설계한다.

- revalidate, mutate

  - mutate는 프론트쪽의 정보만 우선 바꿔놓고 나중에 서버로 정보를 보낸다.
  - revalidate는 서버에서 받아온 정보를 토대로 UI를 바꾼다.

- 코드 작성
  - 로그인이 성공하면 return Redirect를 통해서 다른 페이지로 연결시킨다.
  - return문은 hooks 아래에 작성한다. 아니면 오류 발생한다.
  - fetcher를 같은 api 주소에서 여러개 쓰고 싶으면 쿼리스트링에 해쉬를 붙인다.
  - /api/users/#123이랑 /api/users은 서버에서는 구분을 못하지만 프론트에서는 각각 fetcher를 다르게 요청보낼 수 있다.

### 오늘의 느낀점

<p> 오늘은 SWR으로 로그인/로그아웃 상태 관리하는 방법을 주로 배웠다.<br/>
비교적 내용 자체는 이럴 때 이거 넣으면 되겠구나하고 간단했지만, 이해가 아니고 외우다시피 접근한거라서<br/>
강의를 들으면서 틈틈히 공식문서 읽고 SWR이 어떤 식으로 데이터를 전역으로 관리하는지 이해해야겠다.<br/>
가장 이해가 안된 지점이 데이터를 전역으로 관리한다는 부분이었다.<br/>
아직까지는 해당 api의 url으로 접근해서 정보를 가져오는게 전부 아닌가? 라는 생각이 든다.
</p>
<p>그리고 다시 알고리즘 문제를 풀면서 옛날에 안풀고 넘어간 부분까지 다 풀고 있다.</br>
확실히 처음 봤을 때보다는 이해도라던가 문제를 읽고 침착하게 생각할 수 있는 능력이 키워지긴 한 것 같다.</br>
지금은 문제가 쉬워서 거의 20문제씩 풀고 그러는데, 난이도가 어려워지면 얼마나 줄여야 할 지 감이 아직 오지 않는다.
한가지 확실한 것은 공부를 시작할 때 알고리즘으로 시작해야 시간 확보가 잘된다. 내일은 알고리즘 공부부터 해야겠다.</p>

### 앞으로의 계획

- 먼저 SWR에서 전역으로 데이터 관리한다는 의미에 대해 이해하기
- 워크스페이스 만들기
- 재귀까지 풀면 좋겠지만 힘들 것 같으니 적어도 기본수학 2 절반까진 풀기
