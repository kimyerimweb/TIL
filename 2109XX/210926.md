## 210924 TIL

### 오늘 배운 것

- 모두의 네트워크 다 읽었음!

- 데이터가 전달되는 과정

1. 먼저 TCP 통신을 한다면 커넥션을 먼저 한다.
2. 전달할 데이터에 TCP 헤더를 붙여 세그먼트로 만든다. (어떤 어플리케이션이 타깃인지,길이는 어떤지,순서는 몇번째인지 등을 명시한다.)
3. 전달할 세그먼트에 IP 헤더를 붙여 패킷으로 만든다. (출발지 IP주소와 도착지 IP주소 등을 명시한다.)
4. 전달할 패킷에 이더넷 헤더를 붙여 이더넷 프레임으로 만든다. (출발지의 MAC주소와 도착지 MAC주소, 직전 라우터의 MAC주소와 도착할 곳의 MAC주소 등을 명시한다.)
5. 물리 계층에서 이더넷 프레임을 전기 신호로 바꾸어 전송한다.

- 전송한 정보가 스위치에 도달했을 때

1. 도착한 정보의 이더넷 헤더에 있는 도착할 곳의 MAC주소와 현재 스위치의 MAC주소가 동일한지 파악한다.
2. 동일하지 않으면 정보를 폐기하고 동일하면 직전 라우터의 MAC주소를 현재 스위치의 MAC주소로 변환한다.
3. 도착할 곳의 MAC주소도 변환하고 다시 전기 신호로 변환해 보낸다.

- 전송한 정보가 라우터에 도달했을 때

1. 도착한 정보의 이더넷 헤더에 있는 도착할 곳의 MAC주소와 현재 라우터의 MAC주소가 동일한지 파악한다.
2. 동일하지 않으면 정보를 폐기하고 동일하면 IP 패킷에 있는 목적지 IP주소와 현재 라우터의 IP주소가 동일한지 파악한다.
3. 동일하지 않으면 라우팅 테이블을 확인하고 목적지 IP 주소로 가는 경로를 확인하고 출발지 라우터 IP주소를 현재 라우터의 IP주소로 변경한다.
4. 출발지 MAC 주소를 현재 라우터로 변경하고 목적지 MAC주소를 다음 라우터나 스위치에 맞게 변경한다.

- 전송한 정보가 도달했는데 IP주소가 동일한 경우

1. TCP 헤더에 있는 목적지 포트 번호를 확인하고 어떤 어플리케이션에 맞는 데이터인지 확인한다.

공부하면서 든 의문

1. MAC주소나 IP주소 하나만 사용하지 뭣하러 두개를 사용하는가?

- MAC는 단말기 자체를 구분해주는 유일한 주소이기 때문에 위치를 찾기에는 부적절하다. 어느 위치에 있을지 어림짐작도 하기 힘들다.
  반면에 IP주소는 계층형 주소이다. 어느 위치에서 찾을 수 있을지가 주소에 표기되어있다. 그러므로 두가지를 모두 이용하는 것이다.

2. Keep Alive가 socket io에 사용되었는가?

- 아직 관련된 내용을 찾지 못했다.

### 오늘의 느낀 점

<p>
인강도 좋지만 세세한 하나하나를 이해하는 것보다는 전체 흐름을 아는게 각각 단계를 더 잘 이해할 수 있었다.<br/>
전기 신호로 전달되는 정보에는 단말기를 식별할 수 있는 MAC주소 + 위치를 알려주는 IP주소 + 어느 어플리케이션에서 사용할지 알려주는 포트 번호 + 오류가 발생하면 감지하는 기능을 전부 부여하고<br/>
데이터를 전달하면서 맞으면 헤더를 전부 제거해 데이터만 챙기고 그게 아니라면 다음 경유지로 옮겨갈 수 있도록 헤더 일부를 수정한다.<br/>
이런 흐름을 알고나니 각 단계가 왜 존재하고 어떻게 데이터가 이동하는지 이해할 수 있었다.<br/>
인강과 책 모두 1회독을 마쳤으니 다음 과목을 공부하면서 좀 더 세세한 부분을 파고들면서 공부해야겠다.<br/>
각 단계의 구체적인 내용을 기억할 수 있으려면 반복해서 공부해야할 것 같다.
</p>

### 앞으로의 계획

1. 모두의 네트워크 준비편 다시 읽고 용어 정리, 검색으로 내용 보충
2. 운영체제 반효경 교수님 KOCW 강의 듣기
