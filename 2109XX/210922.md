## 210922 TIL

### 오늘 배운 것

<p>

- 물리 계층은 전기, 광, 무선으로 물리적인 신호를 통해 통신한다.

- 장비의 Capacity

1. BandWidth : 시간당 데이터 이동량 (도로의 넓이)
2. Throughtput : 시간당 데이터 처리량 (자동차 이동량)
3. Backplane : 장비가 최대로 처리할 수 있는 데이터량

- 크로스 케이블과 다이텍트 케이블의 차이점<br/>
UTP케이블은 8개의 코드로 배열되어 있다. 배열 순서에 따라 2가지 타입으로 나뉜다.<br/>
동일 계층 장비끼리의 연결에서는 크로스 케이블로 연결하고 다른 계층의 장비끼리는 다이렉트 케이블을 사용한다.<br/>
</p>
<br/>
<p>

- 데이터 링크 계층

- MAC 주소란?<br/>
  Media Access Control 주소 (MAC 그 자체는 1계층과 연결되어 있음.)<br/>
  물리적으로 구분할 수 있는 장비가 가지고 있는 고유한 식별번호로 L2통신에서 사용되는 주소체계이다.<br/>
  총 48비트로 되어있고 24비트는 제조사의 식별번호, 뒷 24비트는 제조사 내 일련번호로 기기 자체를 구분한다.<br/>

- LLC<br/>
  Logical Link Control (논리적인 부분으로 Frame을 만들고 3계층과 연결되어 있음.)<br/>

- L2 스위치<br/>
  MAC 주소를 기반으로 통신한다. Full duplex지원<br/>

- 동작 방식<br/>

1. 출발지 주소가 MAC 주소 테이블에 없으면 저장한다.<br/>
2. 목적지 주소가 MAC 주소 테이블에 없으면 모든 연결된 포트로 프레임을 전달한다.<br/>
   (신규 주소의 경우에는 물리적으로 포트에 연결은 되어있지만 테이블에는 없기에 이렇게 해야 들어온다.)<br/>
3. 목적지 주소가 MAC 주소 테이블에 있으면 그곳에만 전달한다.<br/>
4. 출발지와 목적지가 같은 네트워크 영역이면 다른 네트워크로 전달하지 않는다.<br/>
5. Aging : 시간이 지나면 MAC 주소 테이블의 주소를 삭제한다.<br/>

- ARP<br/>
  IP주소와 MAC 주소 사이의 변환을 담당하는 프로토콜이다.<br/>
  수신자의 IP주소를 알고 있고 MAC주소를 모르면 ARP Request로 MAC주소를 알아내서 L2통신이 가능해진다.<br/>
  ARP Request 전송 = 브로드캐스팅 방식을 이용한다.<br/>
  ARP Reply로 답신<br/>

- 스위치 Looping<br/>
  발생 원인: 2개 이상의 스위치가 있을 때, 하나의 호스트에서 다른 호스트로 가는 경로가 2개 이상일 때 발생한다.<br/>
  MAC 주소 테이블에 등록되지 않은 목적지로 데이터를 전송해야할 때 한 곳에서 모든 포트로 데이터가 보내진다. 그런데, 특정 경로만 선택해서 이동하는게 아니라 모든 경로로 데이터가 퍼져나가기에 환을 생성해 반복적으로 데이터를 전송한다. 이 현상이 스위치 루핑이다.<br/>

- STP (Spanning Tree Protocol)<br/>
  루핑을 막아주는 알고리즘 : 포트에 우선순위를 가려내 사용하지 않는 경로를 만들어 환을 없앤다.<br/>
  Rood Bridge, Root Port, Designated Port를 가려낸다.<br/>

1. Root Bridge -> 가장 작은 Bridge ID를 가진 브릿지가 루트 브릿지
2. Root Port -> 루트 브릿지와 연결된 포트 중 Path Cost가 가장 작은 경로에 포함된 포트.<br/>
   루트 브릿지에 붙어있는 포트는 제외한다. 루트 포트는 한 브릿지에서 여러 개로 할 수 없다.
3. Designated Port -> Root Port를 정하고 남은 포트들 중에 Path Cost가 가장 작은 경로에 포함된 포트. Root Bridge의 포트는 모두 Designated Port이다. Path Cost가 동일하다면, BID가 작은 곳의 포트를 선택한다. 같은 브릿지면 Port ID가 작은 것을 선택한다.
4. 남은 포트는 Non Designated Port로 포트를 막아버린다. 이 포트와 연결된 곳은 통신을 할 수 없다. (Blocking)

- 브로드 캐스팅, 멀티 캐스팅, 유니 캐스팅<br/>
브로드 캐스팅: 동일 네트워크 내 모든 호스트에게 데이터를 전송<br/>
멀티 캐스팅: 특정 그룹으로 선택된 다수의 호스트에게 데이터를 전송<br/>
유니 캐스팅: 1:1 통신
</p>
<br/>
<p>

- 네트워크 계층<br/>

- IP 주소란?<br/>
  네트워크 계층에서 기기들이 서로를 구분하기 위해 사용하는 고유의 주소.<br/>
  IPv4를 사용해 32비트 2진수로 나타내고 있다. IPv6은 48비트 2진수로 나타낸다.<br/>
  IP주소는 앞 24비트로 네트워크을 나타내고 뒤 8비트로 개별 단말기를 구분한다.<br/>

- 라우터/라우팅/라우티드<br/>
  라우터: 네트워크간 통신에서 가장 빠르고 효율적인 경로를 찾아주는 장치<br/>
  라우팅 프로토콜 : 가장 빠르고 효율적인 경로를 찾는 프로토콜 (OSPF,BGP,RIP)<br/>
  라우티드 프로토콜: 라우팅되는 프로토콜으로 TCP/IP이다. (IP를 가장 효율적인 경로를 찾아 전달해줌)<br/>

- 서브넷 마스크<br/>
  서브넷은 할당된 네트워크 영역을 좀 더 효율적으로 이용하기 위해 쪼개어 나눈 네트워크를 의미한다.<br/>
  서브넷 마스크는 AND 비트 연산자를 사용해서 네트워크를 분할하는 논리적인 수단이다.<br/>
  서브넷 마스크와 AND 연산 후에 남는 숫자가 서브 네트워크 주소이고 IP가 할당된 개수는 마스크의 끝에 연속된 0의 개수를 2의 N승으로 구할 수 있다.<br/>

동일 브로드캐스트 도메인에서는 라우터 없이 통신이 가능하지만 다른 네트워크로 가려면 라우팅이 필요하다.<br/>

- 디폴트 게이트웨이란?<br/>
  다른 네트워크로 가기 위해 라우팅 테이블을 참조했을 때, 가야할 목적지가 테이블에 없으면 패킷을 전달할 곳.<br/>
  디폴트 게이트웨이도 IP를 가진다. 디폴트 게이트웨이에서도 자기 대역이 아니면 다른 디폴트 게이트웨이로 패킷을 전달한다.<br/>

- 각 라우터는 패킷이 들어오면 TTL값을 1감소시키고 TTL이 0이 되면 폐기해서 루핑을 방지한다.<br/>

- 공인 IP와 사설 IP<br/>
  공인 IP는 공인기관에서 인증한 공개된 IP로 외부 네트워크 연결시 사용하는 IP이다.<br/>
  사설 IP는 내부 네트워크(가정이나 사업공간)에서 사용하는 IP로 NAT방식을 이용해 공인IP로 변환해 외부 네트워크와 연결한다. <br/>
  내부 네트워크 집단은 단 1개의 공인 IP로도 외부 네트워크와 통신이 가능하다.<br/>  
  사설 IP는 클래스를 이용해서 범위를 지정해서 사용한다.<br/>

- IP 클래스<br/>
  하나의 네트워크가 몇개의 호스트 IP를 가질 수 있냐에 따라 클래스를 나눌 수 있다. <br/>
  A 클래스 : 0.0.0.0 ~ 127.255.255.255 (0xxx xxxx.xxxx xxxx.xxxx xxxx.xxxx xxxx) 맨 앞의 옥텟 1개가 네트워크 범위이고 나머지 3개는 호스트이다.<br/>
  B 클래스 : 128.0.0.0 ~ 191.255.255.255 (10xx xxxx.xxxx xxxx.xxxx xxxx.xxxx xxxx) 앞 옥텟 2개가 네트워크 범위이고 나머지 2개는 호스트이다.<br/>
  C 클래스 : 192.0.0.0 ~ 223.255.255.255 (110x xxxx.xxxx xxxx.xxxx xxxx.xxxx xxxx) 맨 뒷 옥텟 1개가 호스트이고 나머지는 네트워크이다.<br/>
  D, E => 멀티 캐스트용, 연구용<br/>

네트워크 부분에서 A클래스의 127은 제외되는 약속이 있다.<br/>
그리고 호스트 부분은 0이 네트워크 주소로 사용되고 마지막은 브로드 캐스트 주소로 사용되기 때문에 할당 가능한 IP의 수는 항상 2를 빼야한다. (이 법칙은 서브넷이어도 동일하다.)<br/>

이런 방식으로만 나누면 사용할 IP개수보다 부여받은 클래스에서 할당할 수 있는 IP의 개수가 많을 때,<br/>
사용하지도 못하면서 점유하고 있는 IP가 존재한다. 이 이유로 서브넷 마스크를 이용해 서브넷을 나눠 사용한다.<br/>

</p>
<br/>

### 오늘의 느낀점

<p>
IP주소의 헤더 영역은 어떻게 이루어져 있는지 복잡해서 이해하지 못했다.<br/>
처음 마음 가짐은 인강만 다 완강하면 면접에 들어갈 수 있겠지?로 시작했다.<br/>
하지만 면접 질문과 같이 공부를 하다보니 결국 필요한 범위만큼은 인강 내용뿐만이 아니라 전부 이해해야한다는 생각이 들었다.<br/>
오늘 한 범위는 중요도가 낮은 부분으로 보이고, 질문이 많이 없었는데도 정리하니 양이 꽤 많있다.<br/>
빨리 인강으로 전체 범위를 훑고 책을 보는게 좋을 것 같다.
</p>

### 앞으로의 계획

- TCP ~ 어플리케이션 범위 인강 학습
- 인강 공부한 범위만큼 면접 질문 찾아서 공부하기
